
name: New York City Subway

requirements:

  packages:
  - transiter_nycsubway

  settings:
  - mta_api_key


feeds:

  gtfsstatic:
    http:
      url: http://web.mta.info/developers/data/nyct/subway/google_transit.zip
      headers:
        X-API-KEY: mta_api_key
    parser:
      built_in: GTFS_STATIC
    auto_update:
      period: 1 day

  ServiceStatus:
    http:
      url: http://web.mta.info/status/ServiceStatusSubway.xml
    parser:
      custom: transiter_nycsubway.servicestatusxtmlupdater:update
    auto_update:
      period: 5 seconds

  123456:
    http:
      url: http://datamine.mta.info/mta_esi.php?key={mta_api_key}&feed_id=1
    parser:
      custom: transiter_nycsubway.gtfsupdater:update
    auto_update:
      period: 5 seconds


service_maps:

  any_time:
    source: SCHEDULE
    threshold: 0.05
    use_for_stops_in_route: true

  weekday_day:
    source: SCHEDULE
    conditions: "{{weekday = true, starts_later_than = 7, ends_earlier_than = 19}}"
    threshold: 0.1
    use_for_routes_at_stop: true

  realtime:
    source: REALTIME
    use_for_stops_in_route: true
    use_for_routes_at_stop: true